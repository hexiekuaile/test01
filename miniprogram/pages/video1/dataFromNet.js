"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Video = (function () {
    function Video(vid, type, name, valueCallback) {
        this.vid = vid;
        this.type = type;
        this.name = name;
        this.valueCallback = valueCallback;
        this.convertVidToUrl();
    }
    Video.prototype.convertVidToUrl = function () {
        var that = this;
        wx.request({
            url: 'https://vv.video.qq.com/getinfo',
            data: {
                vids: that.vid,
                platform: 101001,
                charge: 0,
                otype: 'json'
            },
            header: {
                'content-type': 'application/json;charset=UTF-8'
            },
            method: 'GET',
            dataType: 'json',
            success: function (res) {
                var str = res.data;
                var url = str.match(/(?<=\[{"url":").*?(?=","vt")/);
                var urll = url ? url[0] : '';
                var fn = str.match(/(?<=,"fn":").*?(?=","fs")/);
                var fnn = fn ? fn[0] : '';
                var fvkey = str.match(/(?<=,"fvkey":").*?(?=","head")/);
                var fvkeyy = fvkey ? fvkey : '';
                var src = urll + fnn + "?vkey=" + fvkeyy;
                that.src = src;
                console.log(src);
                that.valueCallback(that);
            },
            fail: function (res) {
                console.log(that.name + '转换视频vid时错误：' + res.errMsg);
            }
        });
    };
    return Video;
}());
exports.Video = Video;
;
;
var urlVideoXuanchuanPian = 'https://a-1256136493.cos.ap-nanjing.myqcloud.com/fyhbss/data/videoXuanChuanPian.json';
function getVideoXuanChuanPian() {
    var func = function () {
        wx.request({
            url: urlVideoXuanchuanPian,
            success: function (res) {
                var vs = res.data;
                func.values = new Array(vs.length);
                for (var i = 0; i < vs.length; i++)
                    func.values[i] = new Video(vs[i].vid, vs[i].type, vs[i].name, func.valuesCallback);
            },
            fail: function (res) {
                console.log('宣传片信息请求网络连接错误： ' + res.errMsg);
            }
        });
    };
    return func;
}
;
exports.video = getVideoXuanChuanPian();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YUZyb21OZXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRhRnJvbU5ldC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBO0lBTUUsZUFBWSxHQUFXLEVBQUUsSUFBWSxFQUFFLElBQVksRUFBRSxhQUFzQztRQUN6RixJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNmLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO1FBQ25DLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBQ0QsK0JBQWUsR0FBZjtRQUNFLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNmLEVBQUUsQ0FBQyxPQUFPLENBQUM7WUFDVCxHQUFHLEVBQUUsaUNBQWlDO1lBQ3RDLElBQUksRUFBRTtnQkFDSixJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUc7Z0JBQ2QsUUFBUSxFQUFFLE1BQU07Z0JBQ2hCLE1BQU0sRUFBRSxDQUFDO2dCQUNULEtBQUssRUFBRSxNQUFNO2FBQ2Q7WUFDRCxNQUFNLEVBQUU7Z0JBQ04sY0FBYyxFQUFFLGdDQUFnQzthQUNqRDtZQUNELE1BQU0sRUFBRSxLQUFLO1lBQ2IsUUFBUSxFQUFFLE1BQU07WUFDaEIsT0FBTyxZQUFDLEdBQUc7Z0JBQ1QsSUFBSSxHQUFHLEdBQVcsR0FBRyxDQUFDLElBQWMsQ0FBQztnQkFFckMsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO2dCQUNwRCxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUM3QixJQUFJLEVBQUUsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLDJCQUEyQixDQUFDLENBQUM7Z0JBQ2hELElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBQzFCLElBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztnQkFDeEQsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFFaEMsSUFBSSxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxRQUFRLEdBQUcsTUFBTSxDQUFDO2dCQUN6QyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztnQkFDZixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO2dCQUNoQixJQUFJLENBQUMsYUFBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRTVCLENBQUM7WUFDRCxJQUFJLFlBQUMsR0FBRztnQkFDTixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsYUFBYSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUNyRCxDQUFDO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNILFlBQUM7QUFBRCxDQUFDLEFBakRELElBaURDO0FBakRZLHNCQUFLO0FBaURqQixDQUFDO0FBTUQsQ0FBQztBQUVGLElBQUkscUJBQXFCLEdBQVcsc0ZBQXNGLENBQUM7QUFFM0gsU0FBUyxxQkFBcUI7SUFDNUIsSUFBSSxJQUFJLEdBQVc7UUFDakIsRUFBRSxDQUFDLE9BQU8sQ0FBQztZQUNULEdBQUcsRUFBRSxxQkFBcUI7WUFDMUIsT0FBTyxZQUFDLEdBQUc7Z0JBQ1QsSUFBSSxFQUFFLEdBQVksR0FBRyxDQUFDLElBQUksQ0FBQztnQkFHM0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBRW5DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRTtvQkFDaEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDdkYsQ0FBQztZQUNELElBQUksWUFBQyxHQUFHO2dCQUNOLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1lBQzdDLENBQUM7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDLENBQUM7SUFDRixPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFBQSxDQUFDO0FBRVMsUUFBQSxLQUFLLEdBQUcscUJBQXFCLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWaWRlbyB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ohb7orq/op4bpopHnsbtcclxuICB2aWQ6IHN0cmluZzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6IW+6K6v6KeG6aKRdmlkXHJcbiAgdHlwZTogc3RyaW5nOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v57G75Z6LXHJcbiAgbmFtZTogc3RyaW5nOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lkI3np7BcclxuICBzcmM/OiBzdHJpbmc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6IW+6K6v6KeG6aKR5a6e6ZmF572R57uc5Zyw5Z2AICBcclxuICB2YWx1ZUNhbGxiYWNrPzogKHZhbHVlOiBWaWRlbykgPT4gdm9pZDsgICAgICAgICAgICAgIC8v5Y+v6YCJ55qE5Zue6LCD5pa55rOV77yMICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gIGNvbnN0cnVjdG9yKHZpZDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgdmFsdWVDYWxsYmFjaz86ICh2YWx1ZTogVmlkZW8pID0+IHZvaWQpIHtcclxuICAgIHRoaXMudmlkID0gdmlkO1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLnZhbHVlQ2FsbGJhY2sgPSB2YWx1ZUNhbGxiYWNrO1xyXG4gICAgdGhpcy5jb252ZXJ0VmlkVG9VcmwoKTtcclxuICB9XHJcbiAgY29udmVydFZpZFRvVXJsKCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bCGdmlk6L2s5o2i5Li6VVJMLOaciee9kee7nOivt+axguW7tui/n1xyXG4gICAgbGV0IHRoYXQgPSB0aGlzXHJcbiAgICB3eC5yZXF1ZXN0KHtcclxuICAgICAgdXJsOiAnaHR0cHM6Ly92di52aWRlby5xcS5jb20vZ2V0aW5mbycsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICB2aWRzOiB0aGF0LnZpZCxcclxuICAgICAgICBwbGF0Zm9ybTogMTAxMDAxLFxyXG4gICAgICAgIGNoYXJnZTogMCxcclxuICAgICAgICBvdHlwZTogJ2pzb24nXHJcbiAgICAgIH0sXHJcbiAgICAgIGhlYWRlcjoge1xyXG4gICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyAvLyDpu5jorqTlgLxcclxuICAgICAgfSxcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgc3VjY2VzcyhyZXMpIHtcclxuICAgICAgICBsZXQgc3RyOiBzdHJpbmcgPSByZXMuZGF0YSBhcyBzdHJpbmc7XHJcbiAgICAgICAgLy/nlKjmraPliJnooajovr7lvI9cclxuICAgICAgICBsZXQgdXJsID0gc3RyLm1hdGNoKC8oPzw9XFxbe1widXJsXCI6XCIpLio/KD89XCIsXCJ2dFwiKS8pO1xyXG4gICAgICAgIGxldCB1cmxsID0gdXJsID8gdXJsWzBdIDogJyc7XHJcbiAgICAgICAgbGV0IGZuID0gc3RyLm1hdGNoKC8oPzw9LFwiZm5cIjpcIikuKj8oPz1cIixcImZzXCIpLyk7XHJcbiAgICAgICAgbGV0IGZubiA9IGZuID8gZm5bMF0gOiAnJztcclxuICAgICAgICBsZXQgZnZrZXkgPSBzdHIubWF0Y2goLyg/PD0sXCJmdmtleVwiOlwiKS4qPyg/PVwiLFwiaGVhZFwiKS8pO1xyXG4gICAgICAgIGxldCBmdmtleXkgPSBmdmtleSA/IGZ2a2V5IDogJyc7XHJcbiAgICAgICAgLy/op4Tlvot1cmwgKyBmbiArICc/dmtleT0nICsgZnZrZXkgXHJcbiAgICAgICAgbGV0IHNyYyA9IHVybGwgKyBmbm4gKyBcIj92a2V5PVwiICsgZnZrZXl5O1xyXG4gICAgICAgIHRoYXQuc3JjID0gc3JjO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHNyYylcclxuICAgICAgICB0aGF0LnZhbHVlQ2FsbGJhY2shKHRoYXQpO1xyXG5cclxuICAgICAgfSxcclxuICAgICAgZmFpbChyZXMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGF0Lm5hbWUgKyAn6L2s5o2i6KeG6aKRdmlk5pe26ZSZ6K+v77yaJyArIHJlcy5lcnJNc2cpXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmludGVyZmFjZSBJVmlkZW8geyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+a3t+WQiOexu+Wei+eahOaOpeWPo++8jOinhumikeaOpeWPo1xyXG4gICgpOiB2b2lkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mjqXlj6PnmoTln7rnoYDmlrnms5VcclxuICB2YWx1ZXM6IFZpZGVvW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+inhumikeaVsOe7hO+8jOeUseWfuuehgOaWueazleS7jue9kee7nOivt+axguaVsOaNrlxyXG4gIHZhbHVlc0NhbGxiYWNrPzogKHZpZGVvOiBWaWRlbykgPT4gdm9pZDsgICAgICAgICAgIC8v5Y+v6YCJ55qE5o6l5Y+j55qE5Zue6LCD5pa55rOV77yMXHJcbn07XHJcblxyXG5sZXQgdXJsVmlkZW9YdWFuY2h1YW5QaWFuOiBzdHJpbmcgPSAnaHR0cHM6Ly9hLTEyNTYxMzY0OTMuY29zLmFwLW5hbmppbmcubXlxY2xvdWQuY29tL2Z5aGJzcy9kYXRhL3ZpZGVvWHVhbkNodWFuUGlhbi5qc29uJzsvL+Wuo+S8oOeJh2pzb27kv6Hmga/lnLDlnYBcclxuXHJcbmZ1bmN0aW9uIGdldFZpZGVvWHVhbkNodWFuUGlhbigpOiBJVmlkZW8geyAgICAgICAgICAgICAgLy/mjqXlj6Plrp7njrDvvIzku4Xlrp7njrDkuobln7rnoYDmlrnms5Xku6PnoIHvvIzmnKrlrp7njrDlm57osIPmlrnms5XvvIxcclxuICBsZXQgZnVuYyA9IDxJVmlkZW8+ZnVuY3Rpb24gKCkge1xyXG4gICAgd3gucmVxdWVzdCh7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nvZHnu5zor7fmsYLlj5bmlbDmja5cclxuICAgICAgdXJsOiB1cmxWaWRlb1h1YW5jaHVhblBpYW4sICAgICAgICAgICAgICAgICAgICAgICAgIC8v566A5Y2V5Zyw5Zu+5qCH6K6w54K5anNvbuaWh+S7tueahOe9kee7nOWcsOWdgFxyXG4gICAgICBzdWNjZXNzKHJlcykge1xyXG4gICAgICAgIGxldCB2cyA9IDxWaWRlb1tdPnJlcy5kYXRhOyAgICAgICAgICAgICAgICAgICAgICAgLy90eXBlc2NyaXB06Ieq5Yqo6KOF6YWN77yM5L2G5rKh5pyJ5ZCv5Yqo6KeG6aKR57G755qE5p6E5bu65ZmoXHJcblxyXG5cclxuICAgICAgICBmdW5jLnZhbHVlcyA9IG5ldyBBcnJheSh2cy5sZW5ndGgpOyAgICAgICAgICAgICAgIC8v55Sf5oiQ5Zu65a6a6ZW/5bqm6KeG6aKR5a+56LGh77yM572R57uc6K+35rGC6KeG6aKR5Zyw5Z2AICAgICAgIFxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgZnVuYy52YWx1ZXNbaV0gPSBuZXcgVmlkZW8odnNbaV0udmlkLCB2c1tpXS50eXBlLCB2c1tpXS5uYW1lLCBmdW5jLnZhbHVlc0NhbGxiYWNrKTtcclxuICAgICAgfSxcclxuICAgICAgZmFpbChyZXMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn5a6j5Lyg54mH5L+h5oGv6K+35rGC572R57uc6L+e5o6l6ZSZ6K+v77yaICcgKyByZXMuZXJyTXNnKVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIHJldHVybiBmdW5jO1xyXG59O1xyXG4vL+WjsOaYjuWvueixoeWPmOmHj1xyXG5leHBvcnQgbGV0IHZpZGVvID0gZ2V0VmlkZW9YdWFuQ2h1YW5QaWFuKCk7XHJcbi8v6L+Q6KGM5a+56LGh55qE5Z+656GA5pa55rOV5Luj56CB77yM572R57uc6K+35rGC5pWw5o2uXHJcbi8vbWFya2Vyc1NpbXBsZSgpO1xyXG4iXX0=