"use strict";
Page({
    data: {
        markersSimple: [],
        marker: null,
        markers: [],
        isShowModal: false,
    },
    onLoad: function () {
        this.showLoading();
        markersSimple();
        var thiss = this;
        markersSimple.valuesCallback = function (data) {
            thiss.setData({
                markersSimple: data,
            });
            thiss.hideLoading();
        };
        wx.getSystemInfo({
            success: function (res) {
                console.log('设备品牌: ' + res.brand);
                console.log('设备型号: ' + res.model);
                console.log('微信版本号: ' + res.version);
                console.log('操作系统及版本: ' + res.system);
                console.log('客户端平台: ' + res.platform);
                console.log('客户端基础库版本: ' + res.SDKVersion);
            }
        });
    },
    showModal: function (event) {
        var id = event.markerId;
        for (var _i = 0, _a = this.data.markers; _i < _a.length; _i++) {
            var v = _a[_i];
            if (id == v.id) {
                this.setData({
                    marker: v,
                    isShowModal: true,
                });
                break;
            }
        }
        if (!this.data.marker) {
            this.showLoading();
            if (!marker.valueCallback) {
                var thiss_1 = this;
                marker.valueCallback = function (value) {
                    thiss_1.data.markers.push(value);
                    thiss_1.setData({
                        marker: value,
                        isShowModal: true,
                    });
                    thiss_1.hideLoading();
                };
            }
            marker(id);
        }
    },
    hideModal: function () {
        this.setData({
            marker: null,
            imgs: [],
            isShowModal: false,
        });
    },
    calling: function (event) {
        var tel = event.currentTarget.dataset.id;
        wx.makePhoneCall({
            phoneNumber: tel,
            success: function () {
            },
            fail: function () {
            },
        });
    },
    daohang: function () {
        if (!this.data.marker)
            return;
        var v = this.data.marker;
        wx.openLocation({
            latitude: v.latitude,
            longitude: v.longitude,
            name: v.name,
            address: v.address,
        });
        this.data.marker = null;
    },
    shuaxin: function () {
        this.setData({
            markersSimple: [],
            marker: null,
            markers: [],
            isShowModal: false,
        });
        this.onLoad();
    },
    showLoading: function () {
        wx.showNavigationBarLoading();
        wx.showLoading({
            title: "刷新中...",
        });
    },
    hideLoading: function () {
        wx.hideLoading();
        wx.hideNavigationBarLoading();
    },
    onShow: function () {
    },
    onPullDownRefresh: function () { },
});
var MarkerSimple = (function () {
    function MarkerSimple(id, type, longitude, latitude, name) {
        this.id = id;
        this.type = type;
        this.longitude = longitude;
        this.latitude = latitude;
        this.name = name;
    }
    return MarkerSimple;
}());
;
;
var URL_MARKERSSIMPLE_JSON = 'https://a-1256136493.cos.ap-nanjing.myqcloud.com/fyhbss/data/markersSimple.json';
function getMarkersSimple() {
    var func = function () {
        wx.request({
            url: URL_MARKERSSIMPLE_JSON,
            success: function (res) {
                func.values = res.data;
                if (func.valuesCallback) {
                    func.valuesCallback(func.values);
                }
            },
            fail: function (res) {
                console.log('markersSimple网络连接错误： ' + res.errMsg);
            }
        });
    };
    return func;
}
;
var markersSimple = getMarkersSimple();
var URL_PATH_PRE_IMG = 'https://a-1256136493.cos.ap-nanjing.myqcloud.com/fyhbss/img/';
var Marker = (function () {
    function Marker(id, type, longitude, latitude, name, address, tel, jiedainengli, imgNum, imgsURL, info) {
        if (imgNum === void 0) { imgNum = 0; }
        if (imgsURL === void 0) { imgsURL = []; }
        if (info === void 0) { info = ''; }
        this.id = id;
        this.type = type;
        this.longitude = longitude;
        this.latitude = latitude;
        this.name = name;
        this.address = address;
        this.tel = tel;
        this.jiedainengli = jiedainengli;
        this.info = info;
        this.imgNum = imgNum;
        this.imgsURL = imgsURL;
        if (imgNum > 9)
            this.imgNum = 9;
        else if (imgNum < 0)
            this.imgNum = 0;
        if (imgsURL.length == 0 && imgNum > 0)
            for (var i = 0; i < imgNum; i++) {
                var u = URL_PATH_PRE_IMG + id + i + '.jpg';
                this.imgsURL.push(u);
            }
    }
    return Marker;
}());
;
;
var URL_MARKERS_JSON = 'https://a-1256136493.cos.ap-nanjing.myqcloud.com/fyhbss/data/marker';
function getMarker() {
    var func = function (id) {
        wx.request({
            url: URL_MARKERS_JSON + id + '.json',
            success: function (res) {
                func.value = res.data;
                if (func.value.imgNum > 9)
                    func.value.imgNum = 9;
                else if (func.value.imgNum < 0)
                    func.value.imgNum = 0;
                func.value.imgsURL = [];
                if (func.value.imgNum > 0 && func.value.imgsURL.length == 0)
                    for (var i = 1; i < func.value.imgNum + 1; i++) {
                        var u = URL_PATH_PRE_IMG + id + i + '.jpg';
                        func.value.imgsURL.push(u);
                    }
                if (func.valueCallback) {
                    func.valueCallback(func.value);
                }
            },
            fail: function (res) {
                console.log('地图定位点详细信息，网络连接错误 id=' + id + ' : ' + res.errMsg);
            }
        });
    };
    return func;
}
;
var marker = getMarker();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGl0dS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRpdHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQVVBLElBQUksQ0FBQztJQUNILElBQUksRUFBRTtRQUNKLGFBQWEsRUFBa0IsRUFBRTtRQUNqQyxNQUFNLEVBQWtCLElBQUk7UUFDNUIsT0FBTyxFQUFZLEVBQUU7UUFDckIsV0FBVyxFQUFFLEtBQUs7S0FDbkI7SUFLSCxNQUFNLEVBQU47UUFFSSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbkIsYUFBYSxFQUFFLENBQUM7UUFFaEIsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLGFBQWEsQ0FBQyxjQUFjLEdBQUcsVUFDN0IsSUFBb0I7WUFHcEIsS0FBSyxDQUFDLE9BQU8sQ0FBQztnQkFFWixhQUFhLEVBQUUsSUFBSTthQUNwQixDQUFDLENBQUM7WUFFSCxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDdEIsQ0FBQyxDQUFDO1FBR0osRUFBRSxDQUFDLGFBQWEsQ0FBQztZQUNmLE9BQU8sWUFBRSxHQUFHO2dCQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxHQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtnQkFDL0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEdBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO2dCQUMvQixPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUE7Z0JBQ2xDLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxHQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtnQkFDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFBO2dCQUNuQyxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksR0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUE7WUFDMUMsQ0FBQztTQUFDLENBQUMsQ0FBQTtJ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Q0FBQyxDQUFDO3FCQUM1QjtnQkFDSCxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7b0JBQ3RCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUNoQztZQUNILENBQUM7WUFDRCxJQUFJLFlBQUMsR0FBRztnQkFDTixPQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixHQUFHLEVBQUUsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1lBQy9ELENBQUM7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDLENBQUM7SUFDRixPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFBQSxDQUFDO0FBRUYsSUFBSSxNQUFNLEdBQUcsU0FBUyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQEF1dGhvcjogeWFud2VpXG4gKiBARGF0ZTogMjAyMC0wNC0xOCAyMDowMDowM1xuICogQExhc3RFZGl0b3JzOiB5YW53ZWlcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMDgtMjQgMTY6Mjg6MjlcbiAqIEBEZXNjcmlwdGlvbiA6IOWcsOWbvumhtemdouS7o+eggVxuICovXG5cbi8vaW1wb3J0IGRhdGFGcm9tTmV0ID0gcmVxdWlyZShcIi4vZGF0YUZyb21OZXRcIik7IC8v5a+85YWl6K+35rGC572R57uc5pWw5o2u5Luj56CB5paH5Lu2XG4vL2ltcG9ydCAqIGFzIGRhdGFGcm9tTmV0IGZyb20gXCIuL2RhdGFGcm9tTmV0XCJcblBhZ2Uoe1xuICBkYXRhOiB7XG4gICAgbWFya2Vyc1NpbXBsZTogPE1hcmtlclNpbXBsZVtdPltdLCAvL+WIneWni+WMluWcsOWbvuagh+iusOeCueeugOWNleS/oeaBr+aVsOe7hO+8jOepuuaVsOe7hO+8jOmhtemdouato+W4uOaYvuekuuWcsOWbvu+8jOWbnuiwg+WQju+8jOiHquWKqOWcqOWcsOWbvuS4iuaYvuekuuagh+iusOeCue+8jOeUqOaIt+aEn+inieS4jeWIsOW7tui/n1xuICAgIG1hcmtlciE6IDxNYXJrZXIgfCBudWxsPm51bGwsIC8v6KKr54K55Ye755qE5Zyw5Zu+5qCH6K6w54K577yM5Yid5aeL5YyW5Li656m6XG4gICAgbWFya2VyczogPE1hcmtlcltdPltdLCAvL+aJgOacieWcsOWbvuagh+iusOeCueivpue7huS/oeaBr1xuICAgIGlzU2hvd01vZGFsOiBmYWxzZSwgLy/mmK/lkKbmmL7npLrmqKHmgIHlr7nor53moYbvvIzljbPor6bnu4bkv6Hmga/moYYgICAgXG4gIH0sXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWKoOi9vVxuICAgKi9cblxub25Mb2FkKCkge1xuICAgIC8v6aG16Z2i5Yqg6L2977yM5YWI5q2j5bi45Yqg6L295Zyw5Zu+77yMXG4gICAgdGhpcy5zaG93TG9hZGluZygpO1xuICAgIG1hcmtlcnNTaW1wbGUoKTsgLy/ov5DooYxtYXJrZXJzU2ltcGxl5a+56LGh55qE5Z+656GA5pa55rOV77yM5YW25YaF6YOo55qE6K+35rGC572R57uc5pWw5o2u5Luj56CB5piv5byC5q2l44CB5bu26L+f55qEXG4gICAgLy/miYDku6Xml6DpnIDliKTmlq1kYXRhRnJvbU5ldC5tYXJrZXJzU2ltcGxlLnZhbHVlc+aYr+WQpuWtmOWcqOOAgeWGjei1i+WAvOe7mW1hcmtlcnNTaW1wbGXvvIzlj6/nm7TmjqXlrprkuYnlkozkvb/nlKjlm57osINcbiAgICBsZXQgdGhpc3MgPSB0aGlzOyAvL+W/hemhu+aaguWtmHRoaXPvvIzlkKbliJnlnKjlm57osIPku6PnoIHkuK3nmoR0aGlz5LiN5piv5q2kdGhpc+S6hlxuICAgIG1hcmtlcnNTaW1wbGUudmFsdWVzQ2FsbGJhY2sgPSBmdW5jdGlvbiAoXG4gICAgICBkYXRhOiBNYXJrZXJTaW1wbGVbXVxuICAgICkge1xuICAgICAgLy/lrprkuYnlrp7njrDlm57osIPnmoTku6PnoIHvvIznlKjkuo7nvZHnu5zmlbDmja7or7fmsYLlkI7lm57osINcbiAgICAgIHRoaXNzLnNldERhdGEoe1xuICAgICAgICAvL+ivt+axguWIsOe9kee7nOaVsOaNruWQju+8jOiuvue9ruWcsOWbvuagh+iusOeCueeugOWNleS/oeaBr+aVsOe7hO+8jOWcsOWbvuS4iueri+WNs+aYvuekuuagh+iusOeCue+8jOS4jeW/heimgeaYvuekuuWKoOi9veWKqOeUu++8jOiuqeeUqOaIt+aXoOaEn+W7tui/n1xuICAgICAgICBtYXJrZXJzU2ltcGxlOiBkYXRhLFxuICAgICAgfSk7XG5cbiAgICAgIHRoaXNzLmhpZGVMb2FkaW5nKCk7IC8v6ZqQ6JeP5Yqg6L295Yqo55S7XG4gICAgfTtcblxuICAgIC8v6aKd5aSW55qE77yM6LCD6K+V5L+h5oGvXG4gIHd4LmdldFN5c3RlbUluZm8oe1xuICAgIHN1Y2Nlc3MgKHJlcykge1xuICAgICAgY29uc29sZS5sb2coJ+iuvuWkh+WTgeeJjDogJytyZXMuYnJhbmQpXG4gICAgICBjb25zb2xlLmxvZygn6K6+5aSH5Z6L5Y+3OiAnK3Jlcy5tb2RlbClcbiAgICAgIGNvbnNvbGUubG9nKCflvq7kv6HniYjmnKzlj7c6ICcrcmVzLnZlcnNpb24pXG4gICAgICBjb25zb2xlLmxvZygn5pON5L2c57O757uf5Y+K54mI5pysOiAnK3Jlcy5zeXN0ZW0pXG4gICAgICBjb25zb2xlLmxvZygn5a6i5oi356uv5bmz5Y+wOiAnK3Jlcy5wbGF0Zm9ybSlcbiAgICAgIGNvbnNvbGUubG9nKCflrqLmiLfnq6/ln7rnoYDlupPniYjmnKw6ICcrcmVzLlNES1ZlcnNpb24pXG4gICAgfX0pXG5cbiAgfSwgXG5cbiAgLyoqXG4gICAqIOaYvuekuuivpue7huS/oeaBr+ahhlxuICAgKi9cbiAgc2hvd01vZGFsOiBmdW5jdGlvbiAoZXZlbnQ6IGFueSkge1xuICAgIGxldCBpZCA9IGV2ZW50Lm1hcmtlcklkOyAvL+eUqOaIt+eCueWHu+eahOWcsOWbvuagh+iusOeCueeahGlkXG5cbiAgICBmb3IgKGxldCB2IG9mIHRoaXMuZGF0YS5tYXJrZXJzKSB7IC8v5YWI5Yik5pat6KKr54K55Ye755qE5Zyw5Zu+54K555qE6K+m57uG5L+h5oGv5piv5ZCm5Zyo5pWw57uE5Lit77yM5aaC5Zyo77yM5YiZ5pqC5a2Y5YiwbVxuICAgICAgaWYgKGlkID09IHYuaWQpIHtcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICBtYXJrZXI6IHYsXG4gICAgICAgICAgaXNTaG93TW9kYWw6IHRydWUsXG4gICAgICAgIH0pOyAgICBcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmRhdGEubWFya2VyKSB7IC8v5aaC5LiN5Zyo5pWw57uE5Lit77yM5YiZ572R57uc6K+35rGC5pWw5o2u77yM5YaN5a2Y5Yiw5pWw57uE5Lit77yM5LiL5qyh54K55Ye777yM6K+75Y+W5pWw57uE77yM5LiN5Zyo572R57uc6K+35rGCXG4gICAgICB0aGlzLnNob3dMb2FkaW5nKCk7IC8v5pi+56S65Yqg6L295Yqo55S7XG4gICAgICBpZiAoIW1hcmtlci52YWx1ZUNhbGxiYWNrKSB7ICAvL+WmguaenOS5i+WJjeayoeacieWumuS5ieWbnuiwg+aWueazlVxuICAgICAgICBsZXQgdGhpc3MgPSB0aGlzO1xuICAgICAgICBtYXJrZXIudmFsdWVDYWxsYmFjayA9IGZ1bmN0aW9uICh2YWx1ZTogTWFya2VyKSB7IC8v5a6a5LmJ5a6e546w5Zue6LCD55qE5Luj56CB77yM55So5LqO572R57uc5pWw5o2u6K+35rGC5ZCO5Zue6LCDXG4gICAgICAgICAgdGhpc3MuZGF0YS5tYXJrZXJzLnB1c2godmFsdWUpO1xuICAgICAgICAgIHRoaXNzLnNldERhdGEoe1xuICAgICAgICAgICAgbWFya2VyOiB2YWx1ZSxcbiAgICAgICAgICAgIGlzU2hvd01vZGFsOiB0cnVlLFxuICAgICAgICAgIH0pOyAgICAgICBcblxuICAgICAgICAgIHRoaXNzLmhpZGVMb2FkaW5nKCk7IC8v6ZqQ6JeP5Yqg6L295Yqo55S7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBtYXJrZXIoaWQpOyAvL+WQr+WKqOWcsOWbvuagh+iusOeCueaOpeWPo+WfuuehgOaWueazle+8jOivt+axguagh+iusOeCueivpue7hueahOe9kee7nOaVsOaNrlxuICAgIH1cbiAgICBcbiAgfSxcblxuICAvKipcbiAgICrpmpDol4/lr7nor53moYZcbiAgICpcbiAgICovXG4gIGhpZGVNb2RhbCgpIHtcbiAgICAvL+eCueWHu+mhtemdou+8jOmakOiXj+W8ueWHuuahhlxuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBtYXJrZXI6ICA8TWFya2VyIHwgbnVsbD5udWxsLCAvL+aKiuagh+iusOeCueiuvue9ruS4uuepulxuICAgICAgaW1nczogPFN0cmluZ1tdPltdLFxuICAgICAgaXNTaG93TW9kYWw6IGZhbHNlLFxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKuaLqOaJk+eUteivnVxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqL1xuICBjYWxsaW5nKGV2ZW50OiBhbnkpIHtcbiAgICAvL+aJk+eUteivnVxuICAgIHZhciB0ZWwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaWQ7XG4gICAgd3gubWFrZVBob25lQ2FsbCh7XG4gICAgICBwaG9uZU51bWJlcjogdGVsLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwi5ouo5omT55S16K+d5oiQ5Yqf77yBXCIpXG4gICAgICB9LFxuICAgICAgZmFpbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwi5ouo5omT55S16K+d5aSx6LSl77yBXCIpXG4gICAgICB9LFxuICAgIH0pO1xuICB9LFxuICAvKipcbiAgICog5a+86IiqXG4gICAqL1xuICBkYW9oYW5nKCkge1xuICAgIGlmICghdGhpcy5kYXRhLm1hcmtlcikgcmV0dXJuO1xuICAgIGxldCB2ID0gdGhpcy5kYXRhLm1hcmtlciBhcyBNYXJrZXI7XG4gICAgd3gub3BlbkxvY2F0aW9uKHtcbiAgICAgIGxhdGl0dWRlOiB2LmxhdGl0dWRlLFxuICAgICAgbG9uZ2l0dWRlOiB2LmxvbmdpdHVkZSxcbiAgICAgIG5hbWU6IHYubmFtZSxcbiAgICAgIGFkZHJlc3M6IHYuYWRkcmVzcyxcbiAgICB9KTtcbiAgICB0aGlzLmRhdGEubWFya2VyID0gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICog5Yi35paw5Zyw5Zu+5qCH6K6w54K55pWw5o2uXG4gICAqL1xuICBzaHVheGluKCkge1xuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBtYXJrZXJzU2ltcGxlOiA8TWFya2VyU2ltcGxlW10+W10sXG4gICAgICBtYXJrZXI6IDxNYXJrZXIgfCBudWxsPm51bGwsXG4gICAgICBtYXJrZXJzOiA8TWFya2VyW10+W10sXG4gICAgICBpc1Nob3dNb2RhbDogZmFsc2UsXG4gICAgfSk7XG4gICAgdGhpcy5vbkxvYWQoKTtcbiAgfSxcbiAgLyoqXG4gICAqIOaYvuekuuWKoOi9veWKqOeUu1xuICAgKi9cbiAgc2hvd0xvYWRpbmcoKSB7XG4gICAgd3guc2hvd05hdmlnYXRpb25CYXJMb2FkaW5nKCk7IC8v5Zyo5b2T5YmN6aG16Z2i5pi+56S65a+86Iiq5p2h5Yqg6L295Yqo55S7XG4gICAgd3guc2hvd0xvYWRpbmcoe1xuICAgICAgLy/mmL7npLogbG9hZGluZyDmj5DnpLrmoYbjgILpnIDkuLvliqjosIPnlKggd3guaGlkZUxvYWRpbmcg5omN6IO95YWz6Zet5o+Q56S65qGGXG4gICAgICB0aXRsZTogXCLliLfmlrDkuK0uLi5cIixcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIOmakOiXj+WKoOi9veWKqOeUu1xuICAgKi9cbiAgaGlkZUxvYWRpbmcoKSB7XG4gICAgd3guaGlkZUxvYWRpbmcoKTsgLy/pmpDol49sb2FkaW5nIOaPkOekuuahhlxuICAgIHd4LmhpZGVOYXZpZ2F0aW9uQmFyTG9hZGluZygpOyAvL+makOiXj+WvvOiIquadoeWKoOi9veWKqOeUu1xuICAgIC8vd3guc3RvcFB1bGxEb3duUmVmcmVzaCgpOyAvL+WBnOatouS4i+aLieWIt1xuICB9LFxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLmmL7npLpcbiAgICovXG4gIG9uU2hvdygpIHtcbiAgICAvL+eUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5pi+56S6XG4gIH0sXG4gIC8qKlxuICAgKiDpobXpnaLnm7jlhbPkuovku7blpITnkIblh73mlbAtLeebkeWQrOeUqOaIt+S4i+aLieWKqOS9nFxuICAgKi9cbiAgb25QdWxsRG93blJlZnJlc2goKSB7fSxcbn0pO1xuXG4vLy8vLy8vLy8vLy8vLy8v5b6F5qih5Z2X5YyW5Luj56CBLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY2xhc3MgTWFya2VyU2ltcGxlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nroDljZXnmoTlnLDlm77moIforrDngrnnsbtcbiAgaWQ6IG51bWJlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W6j+WPt1xuICB0eXBlOiBzdHJpbmc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v57G75Z6LXG4gIGxvbmdpdHVkZTogbnVtYmVyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nu4/luqZcbiAgbGF0aXR1ZGU6IG51bWJlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e6rOW6piBcbiAgbmFtZTogc3RyaW5nOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WQjeensFxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCB0eXBlOiBzdHJpbmcsIGxvbmdpdHVkZTogbnVtYmVyLCBsYXRpdHVkZTogbnVtYmVyLCBuYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmxvbmdpdHVkZSA9IGxvbmdpdHVkZTtcbiAgICB0aGlzLmxhdGl0dWRlID0gbGF0aXR1ZGU7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxufTtcblxuaW50ZXJmYWNlIElNYXJrZXJzU2ltcGxlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5re35ZCI57G75Z6L55qE5o6l5Y+j77yM566A5Y2V55qE5Zyw5Zu+5qCH6K6w54K55o6l5Y+jXG4gICgpOiB2b2lkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mjqXlj6PnmoTln7rnoYDmlrnms5VcbiAgdmFsdWVzOiBNYXJrZXJTaW1wbGVbXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eugOWNleeahOWcsOWbvuagh+iusOeCueaVsOe7hO+8jOeUseWfuuehgOaWueazleS7jue9kee7nOivt+axguaVsOaNrlxuICB2YWx1ZXNDYWxsYmFjaz86ICh2YWx1ZXM6IE1hcmtlclNpbXBsZVtdKSA9PiB2b2lkOyAgICAgIC8v5Y+v6YCJ55qE5o6l5Y+j55qE5Zue6LCD5pa55rOV77yMXG59O1xuXG5jb25zdCBVUkxfTUFSS0VSU1NJTVBMRV9KU09OOiBzdHJpbmcgPSAnaHR0cHM6Ly9hLTEyNTYxMzY0OTMuY29zLmFwLW5hbmppbmcubXlxY2xvdWQuY29tL2Z5aGJzcy9kYXRhL21hcmtlcnNTaW1wbGUuanNvbic7Ly/lnLDlm77moIforrDngrnnmoTnroDljZXkv6Hmga/vvIzku4Xku4Xnu4/nuqzluqbjgIHlkI3np7BcblxuZnVuY3Rpb24gZ2V0TWFya2Vyc1NpbXBsZSgpOiBJTWFya2Vyc1NpbXBsZSB7ICAgICAgICAgICAgICAvL+aOpeWPo+WunueOsO+8jOS7heWunueOsOS6huWfuuehgOaWueazleS7o+egge+8jOacquWunueOsOWbnuiwg+aWueazle+8jFxuICBsZXQgZnVuYyA9IDxJTWFya2Vyc1NpbXBsZT5mdW5jdGlvbiAoKSB7XG4gICAgd3gucmVxdWVzdCh7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nvZHnu5zor7fmsYLlj5bmlbDmja5cbiAgICAgIHVybDogVVJMX01BUktFUlNTSU1QTEVfSlNPTiwgICAgICAgICAgICAgICAgICAgICAgICAgLy/nroDljZXlnLDlm77moIforrDngrlqc29u5paH5Lu255qE572R57uc5Zyw5Z2AXG4gICAgICBzdWNjZXNzKHJlcykge1xuICAgICAgICBmdW5jLnZhbHVlcyA9IDxNYXJrZXJTaW1wbGVbXT5yZXMuZGF0YTtcblxuICAgICAgICBpZiAoZnVuYy52YWx1ZXNDYWxsYmFjaykgeyAgICAgICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5Zue6LCD5pa55rOV5a2Y5Zyo77yM5YiZ6L+Q6KGM5Zue6LCD5pa55rOVXG4gICAgICAgICAgZnVuYy52YWx1ZXNDYWxsYmFjayhmdW5jLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmYWlsKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZygnbWFya2Vyc1NpbXBsZee9kee7nOi/nuaOpemUmeivr++8miAnICsgcmVzLmVyck1zZylcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIGZ1bmM7XG59O1xuLy/lo7DmmI7lr7nosaHlj5jph49cbmxldCBtYXJrZXJzU2ltcGxlID0gZ2V0TWFya2Vyc1NpbXBsZSgpO1xuLy/ov5DooYzlr7nosaHnmoTln7rnoYDmlrnms5Xku6PnoIHvvIznvZHnu5zor7fmsYLmlbDmja5cbi8vbWFya2Vyc1NpbXBsZSgpO1xuXG5jb25zdCBVUkxfUEFUSF9QUkVfSU1HOiBzdHJpbmcgPSAnaHR0cHM6Ly9hLTEyNTYxMzY0OTMuY29zLmFwLW5hbmppbmcubXlxY2xvdWQuY29tL2Z5aGJzcy9pbWcvJzsvL+WcsOWbvuagh+iusOeCueS7o+ihqOeahOW8gOaUvuWNleS9jeeFp+eJh3VybOWJjee8gFxuXG5jbGFzcyBNYXJrZXIgeyAgICAgICAgICAgICAgICAgICAgICAgLy/lnLDlm77moIforrDngrnnsbtcbiAgaWQ6IG51bWJlcjtcbiAgdHlwZTogc3RyaW5nOy8v57G75Z6LXG4gIGxvbmdpdHVkZTogbnVtYmVyOy8v57uP5bqmXG4gIGxhdGl0dWRlOiBudW1iZXI7Ly/nuqzluqZcbiAgbmFtZTogc3RyaW5nOy8v5ZCN56ewXG4gIGFkZHJlc3M6IHN0cmluZzsvL+WcsOWdgFxuICB0ZWw6IHN0cmluZzsvL+eUteivnVxuICBqaWVkYWluZW5nbGk6IG51bWJlcjsvL+aOpeW+heiDveWKm1xuICBpbWdOdW06IG51bWJlcjsvL+WbvueJh+aVsOmHj++8jOWbvueJh+WQjeensOaYr2lkK2ltZ051bS5wbmfvvIznuqblrprvvJow4omkaW1nTnVt4omkOe+8jOWmgu+8mjExLnBuZ++8jDIxLnBuZ++8jDIyLnBuZ1xuICBpbWdzVVJMOiBzdHJpbmdbXTsvL+W8gOaUvuWNleS9jeeFp+eJh+aVsOe7hFxuICBpbmZvOiBzdHJpbmc7Ly/kv6Hmga/mlofmnKxcbiAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgdHlwZTogc3RyaW5nLCBsb25naXR1ZGU6IG51bWJlciwgbGF0aXR1ZGU6IG51bWJlciwgbmFtZTogc3RyaW5nLCBhZGRyZXNzOiBzdHJpbmcsIHRlbDogc3RyaW5nLCBqaWVkYWluZW5nbGk6IG51bWJlciwgaW1nTnVtOiBudW1iZXIgPSAwLCBpbWdzVVJMOiBzdHJpbmdbXSA9IDxzdHJpbmdbXT5bXSxcbiAgICBpbmZvOiBzdHJpbmcgPSAnJykge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMubG9uZ2l0dWRlID0gbG9uZ2l0dWRlO1xuICAgIHRoaXMubGF0aXR1ZGUgPSBsYXRpdHVkZTtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgdGhpcy50ZWwgPSB0ZWw7XG4gICAgdGhpcy5qaWVkYWluZW5nbGkgPSBqaWVkYWluZW5nbGk7XG4gICAgdGhpcy5pbmZvID0gaW5mbztcbiAgICB0aGlzLmltZ051bSA9IGltZ051bTtcbiAgICB0aGlzLmltZ3NVUkwgPSBpbWdzVVJMO1xuXG4gICAgaWYgKGltZ051bSA+IDkpXG4gICAgICB0aGlzLmltZ051bSA9IDk7XG4gICAgZWxzZSBpZiAoaW1nTnVtIDwgMClcbiAgICAgIHRoaXMuaW1nTnVtID0gMFxuXG4gICAgaWYgKGltZ3NVUkwubGVuZ3RoID09IDAgJiYgaW1nTnVtID4gMCkgLy/orr7nva7ljZXkvY3kv6Hmga/kuK3nmoTlm77niYdcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1nTnVtOyBpKyspIHtcbiAgICAgICAgbGV0IHUgPSBVUkxfUEFUSF9QUkVfSU1HICsgaWQgKyBpICsgJy5qcGcnOy8v57qm5a6a77ya5Zu+54mH6Lev5b6EXG4gICAgICAgIHRoaXMuaW1nc1VSTC5wdXNoKHUpO1xuICAgICAgfVxuICB9XG59O1xuXG5pbnRlcmZhY2UgSU1hcmtlciB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5re35ZCI57G75Z6L55qE5o6l5Y+j77yM5Zyw5Zu+5qCH6K6w54K55o6l5Y+jXG4gIChpZDogbnVtYmVyKTogdm9pZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5o6l5Y+j55qE5Z+656GA5pa55rOVXG4gIHZhbHVlOiBNYXJrZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Zyw5Zu+5qCH6K6w54K577yM55Sx5Z+656GA5pa55rOV5LuO572R57uc6K+35rGC5pWw5o2uXG4gIHZhbHVlQ2FsbGJhY2s/OiAodmFsdWU6IE1hcmtlcikgPT4gdm9pZDsgICAgICAgICAgICAgICAgLy/lj6/pgInnmoTmjqXlj6PnmoTlm57osIPmlrnms5XvvIxcbn07XG5cbi8v5Zyw5Zu+5qCH6K6w54K5anNvbuaWh+S7tueahOWcsOWdgO+8jOW9ouWmgiBodHRwczovL2EtMTI1NjEzNjQ5My5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20vZnloYnNzL21hcmtlcjEuanNvblxuY29uc3QgVVJMX01BUktFUlNfSlNPTjogc3RyaW5nID0gJ2h0dHBzOi8vYS0xMjU2MTM2NDkzLmNvcy5hcC1uYW5qaW5nLm15cWNsb3VkLmNvbS9meWhic3MvZGF0YS9tYXJrZXInOy8v5Zyw5Zu+5qCH6K6w54K56L6D5aSa5L+h5oGv77yM5ZCr6K+m57uG5L+h5oGvIOWcsOWdgOOAgeeUteivneOAgeetiVxuXG5mdW5jdGlvbiBnZXRNYXJrZXIoKTogSU1hcmtlciB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5o6l5Y+j5a6e546w77yM5LuF5a6e546w5LqG5Z+656GA5pa55rOV5Luj56CB77yM5pyq5a6e546w5Zue6LCD5pa55rOV77yMXG4gIGxldCBmdW5jID0gPElNYXJrZXI+ZnVuY3Rpb24gKGlkOiBudW1iZXIpIHsgICAgICAgICAgICAgIC8v572R57uc6K+35rGC5Y+W5pWw5o2uXG4gICAgd3gucmVxdWVzdCh7XG4gICAgICB1cmw6IFVSTF9NQVJLRVJTX0pTT04gKyBpZCArICcuanNvbicsICAgICAgICAgICAgICAgICAvL+e6puWumu+8mueugOWNleWcsOWbvuagh+iusOeCuWpzb27mlofku7bnmoTnvZHnu5zlnLDlnYBcbiAgICAgIHN1Y2Nlc3MocmVzKSB7XG5cbiAgICAgICAgZnVuYy52YWx1ZSA9IDxNYXJrZXI+cmVzLmRhdGE7ICAgICAgICAgICAgICAgICAgICAvL+iHquWKqOijhemFje+8jOS9huayoeacieWQr+WKqOexu+aehOW7uuWZqCAgXG5cbiAgICAgICAgaWYgKGZ1bmMudmFsdWUuaW1nTnVtID4gOSlcbiAgICAgICAgICBmdW5jLnZhbHVlLmltZ051bSA9IDk7XG4gICAgICAgIGVsc2UgaWYgKGZ1bmMudmFsdWUuaW1nTnVtIDwgMClcbiAgICAgICAgICBmdW5jLnZhbHVlLmltZ051bSA9IDBcblxuICAgICAgICBmdW5jLnZhbHVlLmltZ3NVUkwgPSA8c3RyaW5nW10+W107ICAgICAgICAgICAgICAvL+WIneWni+WMluWbvueJh+i3r+W+hOaVsOe7hFxuXG4gICAgICAgIGlmIChmdW5jLnZhbHVlLmltZ051bSA+IDAgJiYgZnVuYy52YWx1ZS5pbWdzVVJMLmxlbmd0aCA9PSAwKSAvL+iuvue9ruWNleS9jeS/oeaBr+S4reeahOWbvueJh1xuICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgZnVuYy52YWx1ZS5pbWdOdW0gKyAxOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB1ID0gVVJMX1BBVEhfUFJFX0lNRyArIGlkICsgaSArICcuanBnJztcbiAgICAgICAgICAgIGZ1bmMudmFsdWUuaW1nc1VSTC5wdXNoKHUpO1xuICAgICAgICAgIH1cbiAgICAgICAgaWYgKGZ1bmMudmFsdWVDYWxsYmFjaykgeyAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lpoLmnpzlm57osIPmlrnms5XlrZjlnKjvvIzliJnov5DooYzlm57osIPmlrnms5VcbiAgICAgICAgICBmdW5jLnZhbHVlQ2FsbGJhY2soZnVuYy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmYWlsKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZygn5Zyw5Zu+5a6a5L2N54K56K+m57uG5L+h5oGv77yM572R57uc6L+e5o6l6ZSZ6K+vIGlkPScgKyBpZCArICcgOiAnICsgcmVzLmVyck1zZylcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIGZ1bmM7XG59O1xuLy/lo7DmmI7lr7nosaHlj5jph49cbmxldCBtYXJrZXIgPSBnZXRNYXJrZXIoKTtcblxuIl19