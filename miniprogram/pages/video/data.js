"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Video = (function () {
    function Video(id, vid, title) {
        this.src = '';
        this.id = id;
        this.vid = vid;
        this.title = title;
        this.getSrc();
    }
    Video.prototype.getSrc = function () {
        var that = this;
        wx.request({
            url: 'https://vv.video.qq.com/getinfo',
            data: {
                vids: that.vid,
                platform: 101001,
                charge: 0,
                otype: 'json'
            },
            header: {
                'content-type': 'application/json;charset=UTF-8'
            },
            method: 'GET',
            dataType: 'json',
            success: function (res) {
                var str = res.data;
                var url = str.match(/(?<=\[{"url":").*?(?=","vt")/);
                var urll = url ? url[0] : '';
                var fn = str.match(/(?<=,"fn":").*?(?=","fs")/);
                var fnn = fn ? fn[0] : '';
                var fvkey = str.match(/(?<=,"fvkey":").*?(?=","head")/);
                var fvkeyy = fvkey ? fvkey : '';
                var src = urll + fnn + "?vkey=" + fvkeyy;
                that.src = src;
                console.log(that.id + ' ' + that.title + ' ' + src);
            },
            fail: function (res) {
                console.log(res.errMsg);
            }
        });
    };
    return Video;
}());
exports.Video = Video;
exports.videos = [
    new Video(1, 'x0961yzsbpk', '生态环境部宣传片'),
    new Video(2, 'z0961nhl5vi', '环境监测设施'),
    new Video(3, 'n0980b7gjef', '城市污水处理设施'),
    new Video(4, 'u096134l8rp', '生活垃圾处理设施'),
    new Video(5, 'x09614l32ux', '废弃电器电子产品处理设施')
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRhdGEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtJQUtJLGVBQVksRUFBVSxFQUFFLEdBQVcsRUFBRSxLQUFhO1FBRmxELFFBQUcsR0FBVyxFQUFFLENBQUM7UUFHYixJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2xCLENBQUM7SUFDRCxzQkFBTSxHQUFOO1FBQ0ksSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFBO1FBQ2YsRUFBRSxDQUFDLE9BQU8sQ0FBQztZQUNQLEdBQUcsRUFBRSxpQ0FBaUM7WUFDdEMsSUFBSSxFQUFFO2dCQUNGLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRztnQkFDZCxRQUFRLEVBQUUsTUFBTTtnQkFDaEIsTUFBTSxFQUFFLENBQUM7Z0JBQ1QsS0FBSyxFQUFFLE1BQU07YUFDaEI7WUFDRCxNQUFNLEVBQUU7Z0JBQ0osY0FBYyxFQUFFLGdDQUFnQzthQUNuRDtZQUNELE1BQU0sRUFBRSxLQUFLO1lBQ2IsUUFBUSxFQUFFLE1BQU07WUFDaEIsT0FBTyxZQUFDLEdBQUc7Z0JBQ1AsSUFBSSxHQUFHLEdBQVcsR0FBRyxDQUFDLElBQWMsQ0FBQztnQkFFckMsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO2dCQUNwRCxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUM3QixJQUFJLEVBQUUsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLDJCQUEyQixDQUFDLENBQUM7Z0JBQ2hELElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBQzFCLElBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztnQkFDeEQsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFFaEMsSUFBSSxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxRQUFRLEdBQUcsTUFBTSxDQUFDO2dCQUN6QyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztnQkFDZixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFBO1lBQ3ZELENBQUM7WUFDRCxJQUFJLFlBQUMsR0FBRztnQkFDSixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUMzQixDQUFDO1NBQ0osQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVMLFlBQUM7QUFBRCxDQUFDLEFBOUNELElBOENDO0FBOUNZLHNCQUFLO0FBZ0RQLFFBQUEsTUFBTSxHQUFZO0lBQ3pCLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxhQUFhLEVBQUUsVUFBVSxDQUFDO0lBQ3ZDLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxhQUFhLEVBQUUsUUFBUSxDQUFDO0lBQ3JDLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxhQUFhLEVBQUUsVUFBVSxDQUFDO0lBQ3ZDLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxhQUFhLEVBQUUsVUFBVSxDQUFDO0lBQ3ZDLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxhQUFhLEVBQUUsY0FBYyxDQUFDO0NBQzlDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVmlkZW8ge1xyXG4gICAgaWQ6IG51bWJlcjtcclxuICAgIHZpZDogc3RyaW5nO1xyXG4gICAgc3JjOiBzdHJpbmcgPSAnJztcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCB2aWQ6IHN0cmluZywgdGl0bGU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLnZpZCA9IHZpZDtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5nZXRTcmMoKTtcclxuICAgIH1cclxuICAgIGdldFNyYygpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXNcclxuICAgICAgICB3eC5yZXF1ZXN0KHtcclxuICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly92di52aWRlby5xcS5jb20vZ2V0aW5mbycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHZpZHM6IHRoYXQudmlkLFxyXG4gICAgICAgICAgICAgICAgcGxhdGZvcm06IDEwMTAwMSxcclxuICAgICAgICAgICAgICAgIGNoYXJnZTogMCxcclxuICAgICAgICAgICAgICAgIG90eXBlOiAnanNvbidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGVhZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCcgLy8g6buY6K6k5YC8XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3MocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RyOiBzdHJpbmcgPSByZXMuZGF0YSBhcyBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAvL+eUqOato+WImeihqOi+vuW8j1xyXG4gICAgICAgICAgICAgICAgbGV0IHVybCA9IHN0ci5tYXRjaCgvKD88PVxcW3tcInVybFwiOlwiKS4qPyg/PVwiLFwidnRcIikvKTtcclxuICAgICAgICAgICAgICAgIGxldCB1cmxsID0gdXJsID8gdXJsWzBdIDogJyc7XHJcbiAgICAgICAgICAgICAgICBsZXQgZm4gPSBzdHIubWF0Y2goLyg/PD0sXCJmblwiOlwiKS4qPyg/PVwiLFwiZnNcIikvKTtcclxuICAgICAgICAgICAgICAgIGxldCBmbm4gPSBmbiA/IGZuWzBdIDogJyc7XHJcbiAgICAgICAgICAgICAgICBsZXQgZnZrZXkgPSBzdHIubWF0Y2goLyg/PD0sXCJmdmtleVwiOlwiKS4qPyg/PVwiLFwiaGVhZFwiKS8pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGZ2a2V5eSA9IGZ2a2V5ID8gZnZrZXkgOiAnJztcclxuICAgICAgICAgICAgICAgIC8v6KeE5b6LdXJsICsgZm4gKyAnP3ZrZXk9JyArIGZ2a2V5IFxyXG4gICAgICAgICAgICAgICAgbGV0IHNyYyA9IHVybGwgKyBmbm4gKyBcIj92a2V5PVwiICsgZnZrZXl5O1xyXG4gICAgICAgICAgICAgICAgdGhhdC5zcmMgPSBzcmM7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGF0LmlkICsgJyAnICsgdGhhdC50aXRsZSArICcgJyArIHNyYylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmFpbChyZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5lcnJNc2cpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBsZXQgdmlkZW9zOiBWaWRlb1tdID0gW1xyXG4gICAgbmV3IFZpZGVvKDEsICd4MDk2MXl6c2JwaycsICfnlJ/mgIHnjq/looPpg6jlrqPkvKDniYcnKSxcclxuICAgIG5ldyBWaWRlbygyLCAnejA5NjFuaGw1dmknLCAn546v5aKD55uR5rWL6K6+5pa9JyksXHJcbiAgICBuZXcgVmlkZW8oMywgJ24wOTgwYjdnamVmJywgJ+WfjuW4guaxoeawtOWkhOeQhuiuvuaWvScpLFxyXG4gICAgbmV3IFZpZGVvKDQsICd1MDk2MTM0bDhycCcsICfnlJ/mtLvlnoPlnL7lpITnkIborr7mlr0nKSxcclxuICAgIG5ldyBWaWRlbyg1LCAneDA5NjE0bDMydXgnLCAn5bqf5byD55S15Zmo55S15a2Q5Lqn5ZOB5aSE55CG6K6+5pa9JylcclxuXTtcclxuIl19