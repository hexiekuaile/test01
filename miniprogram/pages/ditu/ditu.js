"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var dataFromNet = require("./dataFromNet");
Page({
    data: {
        markersSimple: [],
        marker: undefined,
        markers: [],
        showModalStatus: false,
        showLoadingStatus: false
    },
    onLoad: function () {
        dataFromNet.markersSimple();
        var thiss = this;
        dataFromNet.markersSimple.valuesCallback = function (data) {
            thiss.setData({
                markersSimple: data
            });
        };
    },
    onShow: function () {
    },
    showModal: function (event) {
        var id = event.markerId;
        var b = false;
        for (var _i = 0, _a = this.data.markers; _i < _a.length; _i++) {
            var v = _a[_i];
            if (id == v.id) {
                b = true;
                this.setData({
                    marker: v,
                    showModalStatus: true
                });
                break;
            }
        }
        if (!b) {
            if (!dataFromNet.marker.valueCallback) {
                var thiss_1 = this;
                dataFromNet.marker.valueCallback = function (value) {
                    thiss_1.data.markers.push(value);
                    thiss_1.setData({
                        marker: value,
                        showModalStatus: true
                    });
                };
            }
            dataFromNet.marker(id);
        }
    },
    hideModal: function () {
        this.setData({
            marker: undefined,
            showModalStatus: false
        });
    },
    calling: function (event) {
        var tel = event.currentTarget.dataset.id;
        wx.makePhoneCall({
            phoneNumber: tel,
            success: function () {
                console.log("拨打电话成功！");
            },
            fail: function () {
                console.log("拨打电话失败！");
            }
        });
    },
    daohang: function () {
        var m = this.data.marker;
        wx.openLocation({
            latitude: m.latitude,
            longitude: m.longitude,
            name: m.name,
            address: m.address
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGl0dS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRpdHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQ0FBOEM7QUFFOUMsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBQ0osYUFBYSxFQUE4QixFQUFFO1FBQzdDLE1BQU0sRUFBa0MsU0FBUztRQUNqRCxPQUFPLEVBQXdCLEVBQUU7UUFDakMsZUFBZSxFQUFFLEtBQUs7UUFDdEIsaUJBQWlCLEVBQUUsS0FBSztLQUN6QjtJQUVELE1BQU0sRUFBTjtRQUNFLFdBQVcsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUU1QixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDakIsV0FBVyxDQUFDLGFBQWEsQ0FBQyxjQUFjLEdBQUcsVUFBVSxJQUFnQztZQUNuRixLQUFLLENBQUMsT0FBTyxDQUFDO2dCQUNaLGFBQWEsRUFBRSxJQUFJO2FBQ3BCLENBQUMsQ0FBQTtRQUNKLENBQUMsQ0FBQTtJQUNILENBQUM7SUFFRCxNQUFNO0lBQ04sQ0FBQztJQUVELFNBQVMsRUFBRSxVQUFVLEtBQVU7UUFDN0IsSUFBSSxFQUFFLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztRQUV4QixJQUFJLENBQUMsR0FBWSxLQUFLLENBQUM7UUFDdkIsS0FBYyxVQUFpQixFQUFqQixLQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFqQixjQUFpQixFQUFqQixJQUFpQixFQUFFO1lBQTVCLElBQUksQ0FBQyxTQUFBO1lBQ1IsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQkFDZCxDQUFDLEdBQUcsSUFBSSxDQUFDO2dCQUNULElBQUksQ0FBQyxPQUFPLENBQUM7b0JBQ1gsTUFBTSxFQUFFLENBQUM7b0JBQ1QsZUFBZSxFQUFFLElBQUk7aUJBQ3RCLENBQUMsQ0FBQTtnQkFDRixNQUFNO2FBQ1A7U0FDRjtRQUdELElBQUksQ0FBQyxDQUFDLEVBQUU7WUFDTixJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUU7Z0JBQ3JDLElBQUksT0FBSyxHQUFHLElBQUksQ0FBQztnQkFDakIsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEdBQUcsVUFBVSxLQUF5QjtvQkFDcEUsT0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUMvQixPQUFLLENBQUMsT0FBTyxDQUFDO3dCQUNaLE1BQU0sRUFBRSxLQUFLO3dCQUNiLGVBQWUsRUFBRSxJQUFJO3FCQUN0QixDQUFDLENBQUE7Z0JBQ0osQ0FBQyxDQUFBO2FBQ0Y7WUFFRCxXQUFXLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFBO1NBQ3ZCO0lBSUgsQ0FBQztJQUVELFNBQVMsRUFBRTtRQUNULElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxNQUFNLEVBQUUsU0FBUztZQUNqQixlQUFlLEVBQUUsS0FBSztTQUN2QixDQUFDLENBQUE7SUFDSixDQUFDO0lBRUQsT0FBTyxFQUFFLFVBQVUsS0FBVTtRQUMzQixJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDekMsRUFBRSxDQUFDLGFBQWEsQ0FBQztZQUNmLFdBQVcsRUFBRSxHQUFHO1lBQ2hCLE9BQU8sRUFBRTtnQkFDUCxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1lBQ3hCLENBQUM7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUN4QixDQUFDO1NBQ0YsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVELE9BQU8sRUFBRTtRQUNQLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBNEIsQ0FBQztRQUUvQyxFQUFFLENBQUMsWUFBWSxDQUFDO1lBQ2QsUUFBUSxFQUFFLENBQUMsQ0FBQyxRQUFRO1lBQ3BCLFNBQVMsRUFBRSxDQUFDLENBQUMsU0FBUztZQUN0QixJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUk7WUFDWixPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU87U0FDbkIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkYXRhRnJvbU5ldCA9IHJlcXVpcmUoXCIuL2RhdGFGcm9tTmV0XCIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5a+85YWl6K+35rGC572R57uc5pWw5o2u5Luj56CB5paH5Lu2XG5cblBhZ2Uoe1xuICBkYXRhOiB7XG4gICAgbWFya2Vyc1NpbXBsZTogPGRhdGFGcm9tTmV0Lk1hcmtlclNpbXBsZVtdPltdLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WIneWni+WMluWcsOWbvuagh+iusOeCueeugOWNleS/oeaBr+aVsOe7hO+8jOepuuaVsOe7hO+8jOmhtemdouato+W4uOaYvuekuuWcsOWbvu+8jOWbnuiwg+WQju+8jOiHquWKqOWcqOWcsOWbvuS4iuaYvuekuuagh+iusOeCue+8jOeUqOaIt+aEn+inieS4jeWIsOW7tui/n1xuICAgIG1hcmtlcjogPGRhdGFGcm9tTmV0Lk1hcmtlciB8IHVuZGVmaW5lZD51bmRlZmluZWQsLy/ooqvngrnlh7vnmoTlnLDlm77moIforrDngrnvvIzliJ3lp4vljJblj5jph4/vvIzku4Xorql0eXBlc2NyaXB057yW6K+R5Zmo5o6o5pat5Y+Y6YeP57G75Z6LXG4gICAgbWFya2VyczogPGRhdGFGcm9tTmV0Lk1hcmtlcltdPltdLFxuICAgIHNob3dNb2RhbFN0YXR1czogZmFsc2UsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pi+56S66K+m57uG5L+h5oGv5qCH5b+XXG4gICAgc2hvd0xvYWRpbmdTdGF0dXM6IGZhbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WKoOi9vWxvYWRpbmfliqjnlLvmoIflv5dcbiAgfSxcblxuICBvbkxvYWQoKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pobXpnaLliqDovb3vvIzlhYjmraPluLjliqDovb3lnLDlm77vvIxcbiAgICBkYXRhRnJvbU5ldC5tYXJrZXJzU2ltcGxlKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6L+Q6KGMbWFya2Vyc1NpbXBsZeWvueixoeeahOWfuuehgOaWueazle+8jOWFtuWGhemDqOeahOivt+axgue9kee7nOaVsOaNruS7o+eggeaYr+W8guatpeOAgeW7tui/n+eahFxuICAgIC8v5omA5Lul5peg6ZyA5Yik5patZGF0YUZyb21OZXQubWFya2Vyc1NpbXBsZS52YWx1ZXPmmK/lkKblrZjlnKjjgIHlho3otYvlgLznu5ltYXJrZXJzU2ltcGxl77yM5Y+v55u05o6l5a6a5LmJ5ZKM5L2/55So5Zue6LCDXG4gICAgbGV0IHRoaXNzID0gdGhpczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W/hemhu+aaguWtmHRoaXPvvIzlkKbliJnlnKjlm57osIPku6PnoIHkuK3nmoR0aGlz5LiN5piv5q2kdGhpc+S6hlxuICAgIGRhdGFGcm9tTmV0Lm1hcmtlcnNTaW1wbGUudmFsdWVzQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZGF0YTogZGF0YUZyb21OZXQuTWFya2VyU2ltcGxlW10pIHsgIC8v5a6a5LmJ5a6e546w5Zue6LCD55qE5Luj56CB77yM55So5LqO572R57uc5pWw5o2u6K+35rGC5ZCO5Zue6LCDXG4gICAgICB0aGlzcy5zZXREYXRhKHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ivt+axguWIsOe9kee7nOaVsOaNruWQju+8jOiuvue9ruWcsOWbvuagh+iusOeCueeugOWNleS/oeaBr+aVsOe7hO+8jOWcsOWbvuS4iueri+WNs+aYvuekuuagh+iusOeCue+8jOS4jeW/heimgeaYvuekuuWKoOi9veWKqOeUu++8jOiuqeeUqOaIt+aXoOaEn+W7tui/n1xuICAgICAgICBtYXJrZXJzU2ltcGxlOiBkYXRhXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBvblNob3coKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouaYvuekulxuICB9LFxuXG4gIHNob3dNb2RhbDogZnVuY3Rpb24gKGV2ZW50OiBhbnkpIHtcbiAgICB2YXIgaWQgPSBldmVudC5tYXJrZXJJZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Zyw5Zu+5qCH6K6w54K5aWRcblxuICAgIGxldCBiOiBib29sZWFuID0gZmFsc2U7XG4gICAgZm9yIChsZXQgdiBvZiB0aGlzLmRhdGEubWFya2VycykgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WFiOWIpOaWreiiq+eCueWHu+eahOWcsOWbvueCueeahOivpue7huS/oeaBr+aYr+WQpuWcqOaVsOe7hOS4re+8jOWmguWcqO+8jOWImeaaguWtmOWIsG1cbiAgICAgIGlmIChpZCA9PSB2LmlkKSB7XG4gICAgICAgIGIgPSB0cnVlO1xuICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgIG1hcmtlcjogdixcbiAgICAgICAgICBzaG93TW9kYWxTdGF0dXM6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBpZiAoIWIpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5aaC5LiN5Zyo5pWw57uE5Lit77yM5YiZ572R57uc6K+35rGC5pWw5o2u77yM5YaN5a2Y5Yiw5pWw57uE5Lit77yM5LiL5qyh54K55Ye777yM6K+75Y+W5pWw57uE77yM5LiN5Zyo572R57uc6K+35rGCXG4gICAgICBpZiAoIWRhdGFGcm9tTmV0Lm1hcmtlci52YWx1ZUNhbGxiYWNrKSB7XG4gICAgICAgIGxldCB0aGlzcyA9IHRoaXM7XG4gICAgICAgIGRhdGFGcm9tTmV0Lm1hcmtlci52YWx1ZUNhbGxiYWNrID0gZnVuY3Rpb24gKHZhbHVlOiBkYXRhRnJvbU5ldC5NYXJrZXIpIHsgIC8v5a6a5LmJ5a6e546w5Zue6LCD55qE5Luj56CB77yM55So5LqO572R57uc5pWw5o2u6K+35rGC5ZCO5Zue6LCDXG4gICAgICAgICAgdGhpc3MuZGF0YS5tYXJrZXJzLnB1c2godmFsdWUpO1xuICAgICAgICAgIHRoaXNzLnNldERhdGEoe1xuICAgICAgICAgICAgbWFya2VyOiB2YWx1ZSxcbiAgICAgICAgICAgIHNob3dNb2RhbFN0YXR1czogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5ZCv5Yqo5Zyw5Zu+5qCH6K6w54K55o6l5Y+j5Z+656GA5pa55rOV77yM6K+35rGC5qCH6K6w54K56K+m57uG55qE572R57uc5pWw5o2uXG5cbiAgICAgIGRhdGFGcm9tTmV0Lm1hcmtlcihpZClcbiAgICB9XG5cblxuXG4gIH0sXG5cbiAgaGlkZU1vZGFsOiBmdW5jdGlvbiAoKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v54K55Ye76aG16Z2i77yM6ZqQ6JeP5by55Ye65qGGXG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIG1hcmtlcjogdW5kZWZpbmVkLFxuICAgICAgc2hvd01vZGFsU3RhdHVzOiBmYWxzZVxuICAgIH0pXG4gIH0sXG5cbiAgY2FsbGluZzogZnVuY3Rpb24gKGV2ZW50OiBhbnkpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omT55S16K+dXG4gICAgdmFyIHRlbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pZDtcbiAgICB3eC5tYWtlUGhvbmVDYWxsKHtcbiAgICAgIHBob25lTnVtYmVyOiB0ZWwsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi5ouo5omT55S16K+d5oiQ5Yqf77yBXCIpXG4gICAgICB9LFxuICAgICAgZmFpbDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIuaLqOaJk+eUteivneWksei0pe+8gVwiKVxuICAgICAgfVxuICAgIH0pXG4gIH0sXG5cbiAgZGFvaGFuZzogZnVuY3Rpb24gKCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5a+86Iiq5Zyw5Zu+XG4gICAgdmFyIG0gPSB0aGlzLmRhdGEubWFya2VyIGFzIGRhdGFGcm9tTmV0Lk1hcmtlcjtcblxuICAgIHd4Lm9wZW5Mb2NhdGlvbih7XG4gICAgICBsYXRpdHVkZTogbS5sYXRpdHVkZSxcbiAgICAgIGxvbmdpdHVkZTogbS5sb25naXR1ZGUsXG4gICAgICBuYW1lOiBtLm5hbWUsXG4gICAgICBhZGRyZXNzOiBtLmFkZHJlc3NcbiAgICB9KVxuICB9LFxufSkiXX0=